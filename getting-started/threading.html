<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta property="og:title" content="Adze - Better JavaScript Logging"><meta property="og:description" content="A TypeScript enabled library with a beautiful API that simplifies JavaScript logging."><meta property="og:image" content="https://adzejs.com/assets/img/demo.png"><meta property="og:url" content="https://www.adzejs.com/"><meta property="twitter:title" content="Adze - Better JavaScript Logging"><meta property="twitter:description" content="A TypeScript enabled library with a beautiful API that simplifies JavaScript logging."><meta property="twitter:image" content="https://adzejs.com/assets/img/demo.png"><meta property="twitter:card" content="summary_large_image"><script async defer data-domain="adzejs.com" src="https://plausible.io/js/plausible.js"></script><script src="https://cdn.jsdelivr.net/npm/adze/dist/adze.min.js"></script><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Share&display=swap" rel="stylesheet"><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="icon" href="/images/icon.svg"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Log Threading (MDC) | Universal Logging for JavaScript</title><meta name="description" content="A universal, modern, and extendable logging library for JavaScript and TypeScript.">
    <link rel="preload" href="/assets/style-aEe6FEQ7.css" as="style"><link rel="stylesheet" href="/assets/style-aEe6FEQ7.css">
    <link rel="modulepreload" href="/assets/app-B8TmVyZo.js"><link rel="modulepreload" href="/assets/threading.html-jQXvamyB.js">
    <link rel="prefetch" href="/assets/index.html-BnngeoNp.js" as="script"><link rel="prefetch" href="/assets/plugins.html-CENWr3L2.js" as="script"><link rel="prefetch" href="/assets/annotation.html-CdogsOHY.js" as="script"><link rel="prefetch" href="/assets/capture-data.html-Dw4Va_G1.js" as="script"><link rel="prefetch" href="/assets/concepts.html-BqV4z8Sw.js" as="script"><link rel="prefetch" href="/assets/configuration.html-Ls5U2FSQ.js" as="script"><link rel="prefetch" href="/assets/filtering.html-DIMSMpSd.js" as="script"><link rel="prefetch" href="/assets/global-store.html-zlqgBV6b.js" as="script"><link rel="prefetch" href="/assets/installation.html-D93E36GX.js" as="script"><link rel="prefetch" href="/assets/introduction.html-Ccn0n-50.js" as="script"><link rel="prefetch" href="/assets/migrating.html-C2Z7yGU6.js" as="script"><link rel="prefetch" href="/assets/putting-it-all-together.html-DkdWjr-X.js" as="script"><link rel="prefetch" href="/assets/setup.html-HovwHKDw.js" as="script"><link rel="prefetch" href="/assets/tools.html-DwLg34u8.js" as="script"><link rel="prefetch" href="/assets/chainable-api.html-C5PMQKBX.js" as="script"><link rel="prefetch" href="/assets/configurable.html-BOsmnqPP.js" as="script"><link rel="prefetch" href="/assets/footer.html-BbbTUAc7.js" as="script"><link rel="prefetch" href="/assets/getting-started-is-easy.html-jGkobYwi.js" as="script"><link rel="prefetch" href="/assets/global-store.html-BOPtxiOT.js" as="script"><link rel="prefetch" href="/assets/much-more.html-CJy_oSmv.js" as="script"><link rel="prefetch" href="/assets/typescript-first.html-BlPMA3cm.js" as="script"><link rel="prefetch" href="/assets/universal.html--dR6YP8y.js" as="script"><link rel="prefetch" href="/assets/configuration.html-DJMZMrAK.js" as="script"><link rel="prefetch" href="/assets/formatters.html-YFVYlW3l.js" as="script"><link rel="prefetch" href="/assets/getters.html-QTUrCUPg.js" as="script"><link rel="prefetch" href="/assets/global-store.html-SdvrqV1y.js" as="script"><link rel="prefetch" href="/assets/introduction.html-BdJwc-8h.js" as="script"><link rel="prefetch" href="/assets/log-class.html-BEayTnjX.js" as="script"><link rel="prefetch" href="/assets/micro-frontends.html-BlHvca_j.js" as="script"><link rel="prefetch" href="/assets/middleware.html-DNgcpxjj.js" as="script"><link rel="prefetch" href="/assets/modifiers.html-B7b2WEvs.js" as="script"><link rel="prefetch" href="/assets/terminators.html-ay1rpjUn.js" as="script"><link rel="prefetch" href="/assets/tools.html-CkIcr8l4.js" as="script"><link rel="prefetch" href="/assets/unit-testing.html--JAe420p.js" as="script"><link rel="prefetch" href="/assets/404.html-DniVU8S3.js" as="script"><link rel="prefetch" href="/assets/SearchResult-ClN-eMjs.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Universal Logging for JavaScript</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/getting-started/introduction.html" aria-label="Getting Started"><!---->Getting Started<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/reference/introduction.html" aria-label="Reference Manual"><!---->Reference Manual<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/plugins.html" aria-label="Plugins"><!---->Plugins<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://adzejs.com/v1/" aria-label="v1.x" rel="noopener noreferrer" target="_blank"><!---->v1.x<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/adzejs/adze" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/getting-started/introduction.html" aria-label="Getting Started"><!---->Getting Started<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/reference/introduction.html" aria-label="Reference Manual"><!---->Reference Manual<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/plugins.html" aria-label="Plugins"><!---->Plugins<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://adzejs.com/v1/" aria-label="v1.x" rel="noopener noreferrer" target="_blank"><!---->v1.x<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/adzejs/adze" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading active" href="/getting-started/introduction.html" aria-label="Getting Started"><!---->Getting Started<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/introduction.html" aria-label="Introduction"><!---->Introduction<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/installation.html" aria-label="Installation"><!---->Installation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/migrating.html" aria-label="Migrating from v1"><!---->Migrating from v1<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/concepts.html" aria-label="Concepts"><!---->Concepts<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/setup.html" aria-label="Setup"><!---->Setup<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/configuration.html" aria-label="Configuration"><!---->Configuration<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/annotation.html" aria-label="Log Annotation"><!---->Log Annotation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/global-store.html" aria-label="Global Store"><!---->Global Store<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/capture-data.html" aria-label="Capturing Log Data"><!---->Capturing Log Data<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/getting-started/threading.html" aria-label="Log Threading (MDC)"><!---->Log Threading (MDC)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/filtering.html" aria-label="Filtering Logs"><!---->Filtering Logs<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/tools.html" aria-label="Tools"><!---->Tools<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/getting-started/putting-it-all-together.html" aria-label="Putting It All Together"><!---->Putting It All Together<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="log-threading-mdc" tabindex="-1"><a class="header-anchor" href="#log-threading-mdc"><span>Log Threading (MDC)</span></a></h1><p>In large applications there are often times when we need to log data that comes from multiple different scopes but we want to collect all of the data and print it in a single log.</p><p>This practice of collating data from many scopes is called <a href="https://www.baeldung.com/mdc-in-log4j-2-logback" target="_blank" rel="noopener noreferrer">Mapped Diagnostic Context</a>. This is a common feature in Java&#39;s Log4J library.</p><p>Adze also supports <a href="https://www.baeldung.com/mdc-in-log4j-2-logback" target="_blank" rel="noopener noreferrer">Mapped Diagnostic Context</a>, or as Adze calls it, <strong>Log Threading</strong>. Think of a log thread like a thread on a message board or reddit where multiple individuals make a comment on a common topic.</p><p>Here is an example of how threads can be used with Adze:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> answer <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></span>
<span class="line">  adze<span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token string">&#39;maths&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thread</span><span class="token punctuation">(</span><span class="token string">&#39;added&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> answer <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> answer<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">subtract</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> answer <span class="token operator">=</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span></span>
<span class="line">  adze<span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token string">&#39;maths&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thread</span><span class="token punctuation">(</span><span class="token string">&#39;subtracted&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> answer <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> answer<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">adze<span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token string">&#39;maths&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dump<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&#39;Results from our thread&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-output" tabindex="-1"><a class="header-anchor" href="#example-output"><span>Example Output</span></a></h2><p><img src="/assets/thread-example-1-DsvaeKnP.png" alt="Example of a single log dumping out values from multiple scopes"></p><hr><p>Notice that each log within the <code>add</code> and <code>subtract</code> functions does not actually generate a log, but rather they add a key / value pair of data to the <code>&quot;maths&quot;</code> label thread.</p><p>On line 16, we create a log with the <code>&quot;maths&quot;</code> label, which provides it with the same context as the other logs in the thread, and the <code>dump</code> modifier instructs the info log to dump the values from the <code>&quot;maths&quot;</code> thread into the log output.</p><p>We now have a single log that contains values from multiple scopes in our application.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/adzejs/adze/edit/main/getting-started/threading.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ajstacy@gmail.com">Andrew Stacy</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/getting-started/capture-data.html" aria-label="Capturing Log Data"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Capturing Log Data</span></div></a><a class="route-link auto-link next" href="/getting-started/filtering.html" aria-label="Filtering Logs"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Filtering Logs</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-B8TmVyZo.js" defer></script>
  </body>
</html>
