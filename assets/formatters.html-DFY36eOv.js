import{_ as o}from"./demo-CDG8Pcr1.js";import{_ as l,c as i,b as s,d as n,e,w as t,a as p,r,o as c}from"./app-CiZ6VypJ.js";const u="/assets/jsonFormatErrorSerializer-example-node-qQi-ELX5.png",d="/assets/jsonFormatRequestSerializer-example-node-Dm35zPjC.png",m="/assets/jsonFormatResponseSerializer-example-node-DYep3-kZ.png",k="/assets/standardFormat-example-node-8PEiePsc.png",v="/assets/commonFormat-example-node-BC4r3s9q.png",h={},f=p('<h1 id="formatters" tabindex="-1"><a class="header-anchor" href="#formatters"><span>Formatters</span></a></h1><p>The primary purpose of Adze is to give the user simple ways of shaping their logs to fit their needs. Adze comes with <strong>four</strong> formatters out of the box.</p><table><thead><tr><th>Formatter</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><a href="#pretty-formatter">Pretty</a></td><td><code>&quot;pretty&quot;</code></td><td>The default formatter. This prints logs in a pretty, human-readable format.</td></tr><tr><td><a href="#json-formatter">JSON</a></td><td><code>&quot;json&quot;</code></td><td>This formatter prints logs as machine-readable JSON objects that are compatible with the <a href="https://github.com/trentm/node-bunyan?tab=readme-ov-file#cli-usage" target="_blank" rel="noopener noreferrer">Bunyan CLI</a>.</td></tr><tr><td><a href="#standard-formatter">Standard</a></td><td><code>&quot;standard&quot;</code></td><td>This formatter prints human-readable logs for a simple <strong>stdout</strong> format for terminals or files.</td></tr><tr><td><a href="#common-formatter">Common</a></td><td><code>&quot;common&quot;</code></td><td>This formatter prints logs according to the <a href="https://en.wikipedia.org/wiki/Common_Log_Format" target="_blank" rel="noopener noreferrer">Common Log Format</a>.</td></tr></tbody></table><h2 id="pretty-formatter" tabindex="-1"><a class="header-anchor" href="#pretty-formatter"><span>Pretty Formatter</span></a></h2><p>The <strong>Pretty</strong> formatter is the default formatter used by Adze. It formats logs in a pretty, human-readable manner.</p>',5),g=s("code",null,"format",-1),b=s("code",null,'"pretty"',-1),y=p(`<div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> setup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;pretty&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="browser-and-server-output" tabindex="-1"><a class="header-anchor" href="#browser-and-server-output"><span>Browser and Server Output</span></a></h4><p><img src="`+o+'" alt="example of browser and server output for the pretty format"></p><br><h2 id="json-formatter" tabindex="-1"><a class="header-anchor" href="#json-formatter"><span>JSON Formatter</span></a></h2><p>The <strong>JSON</strong> formatter is used to generate machine-readable JSON logs. The logs that are generated are compatible with the <a href="https://github.com/trentm/node-bunyan?tab=readme-ov-file#cli-usage" target="_blank" rel="noopener noreferrer">Bunyan CLI</a> for parsing logs to be human-readable or for filtering them based on their values.</p>',6),w=s("code",null,"format",-1),x=s("code",null,'"json"',-1),_=p(`<div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> setup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jsonlogformatmeta-interface" tabindex="-1"><a class="header-anchor" href="#jsonlogformatmeta-interface"><span>JsonLogFormatMeta Interface</span></a></h3>`,2),z=s("a",{href:"https://github.com/trentm/node-bunyan?tab=readme-ov-file#log-record-fields",target:"_blank",rel:"noopener noreferrer"},"Bunyan JSON Schema",-1),F=p(`<h4 id="usage-example" tabindex="-1"><a class="header-anchor" href="#usage-example"><span>Usage Example</span></a></h4><p>To get TS type checking for these values, Adze exports an interface called <code>JsonLogFormatMeta</code> that can be passed to the meta modifier as a generic type.</p><p>The minimum required fields are <code>name</code> and <code>hostname</code>.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> setup<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">JsonLogFormatMeta</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  level<span class="token operator">:</span> <span class="token string">&#39;debug&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> logger <span class="token operator">=</span> adze<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">meta</span><span class="token generic class-name"><span class="token operator">&lt;</span>JsonLogFormatMeta<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;myApp&#39;</span><span class="token punctuation">,</span> hostname<span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> logger<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// --- OR ALTERNATIVELY</span></span>
<span class="line"></span>
<span class="line"><span class="token generic-function"><span class="token function">setup</span><span class="token generic class-name"><span class="token operator">&lt;</span>JsonLogFormatMeta<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  level<span class="token operator">:</span> <span class="token string">&#39;debug&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  meta<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    name<span class="token operator">:</span> <span class="token string">&#39;myApp&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    hostname<span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you want to later apply extra optional JSON log meta fields, you can use the <code>JsonLogOptionalFields</code> interface.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token comment">// ./elsewhere.ts</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">type</span> <span class="token class-name">JsonLogOptionalFields</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> logger <span class="token keyword">from</span> <span class="token string">&#39;./logger&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">logger<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">meta</span><span class="token generic class-name"><span class="token operator">&lt;</span>JsonLogOptionalFields<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> latency<span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&#39;Logging the latency of our app.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="interface" tabindex="-1"><a class="header-anchor" href="#interface"><span>Interface</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">JsonLogFormatMeta</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * The name of the application or logger that is generating the log.</span>
<span class="line">   */</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * The hostname of the machine that generated the log.</span>
<span class="line">   */</span></span>
<span class="line">  hostname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * The name of the log level.</span>
<span class="line">   */</span></span>
<span class="line">  levelName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Optional. Object giving log call source info. This is added automatically by Bunyan if the</span>
<span class="line">   * &quot;src: true&quot; config option is given to the Logger. Never use in production as this is really</span>
<span class="line">   * slow.</span>
<span class="line">   */</span></span>
<span class="line">  src<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * A caught JS exception. This will be added anytime adze detects an Error object in the log</span>
<span class="line">   * terminator arguments. You may also manually serialize an error with the \`serializeError\`</span>
<span class="line">   * function from adze.</span>
<span class="line">   */</span></span>
<span class="line">  err<span class="token operator">?</span><span class="token operator">:</span> JsonLogError<span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * A request identifier. Including this field in all logging tied to handling a particular request</span>
<span class="line">   * to your server is strongly suggested. This allows post analysis of logs to easily collate all</span>
<span class="line">   * related logging for a request. This really shines when you have a SOA with multiple services</span>
<span class="line">   * and you carry a single request ID from the top API down through all APIs.</span>
<span class="line">   */</span></span>
<span class="line">  req_id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * An HTTP server request. This can be generated with the \`serializeRequest\` function from adze.</span>
<span class="line">   */</span></span>
<span class="line">  req<span class="token operator">?</span><span class="token operator">:</span> JsonLogHttpRequest<span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * An HTTP server response. This can be generated with the \`serializeResponse\` function from adze.</span>
<span class="line">   */</span></span>
<span class="line">  res<span class="token operator">?</span><span class="token operator">:</span> JsonLogHttpResponse<span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * The latency of the logged request in milliseconds.</span>
<span class="line">   */</span></span>
<span class="line">  latency<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Any additional meta data that you want to include in the log.</span>
<span class="line">   */</span></span>
<span class="line">  meta<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * Type for a JSON Log error on the \`err\` property.</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">JsonLogError</span> <span class="token punctuation">{</span></span>
<span class="line">  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  stack<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * Type for declaring a JSON log HTTP request object.</span>
<span class="line"> *</span>
<span class="line"> * This can be generated from the \`serializeRequest\` function from adze.</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">JsonLogHttpRequest</span> <span class="token punctuation">{</span></span>
<span class="line">  method<span class="token operator">:</span> HttpMethod<span class="token punctuation">;</span></span>
<span class="line">  url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  headers<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">  body<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  remoteAddress<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  remotePort<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  username<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * Type for declaring a JSON log HTTP response object.</span>
<span class="line"> *</span>
<span class="line"> * This can be generated from the \`serializeResponse\` function from adze.</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">JsonLogHttpResponse</span> <span class="token punctuation">{</span></span>
<span class="line">  statusCode<span class="token operator">:</span> HttpStatus<span class="token punctuation">;</span></span>
<span class="line">  header<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jsonlogformatmeta-serializer-functions" tabindex="-1"><a class="header-anchor" href="#jsonlogformatmeta-serializer-functions"><span>JsonLogFormatMeta Serializer Functions</span></a></h3><p>For the JSON log meta properties of <code>err</code>, <code>req</code>, and <code>res</code> Adze provides a set of serializer functions to make it much simpler to apply these meta data values.</p><h4 id="serializeerror" tabindex="-1"><a class="header-anchor" href="#serializeerror"><span>serializeError</span></a></h4><hr><p>This function accepts a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noopener noreferrer">JavaScript Error object</a> and returns a serialized meta data object that is compatible with the <a href="#jsonlogformatmeta-interface">JsonLogFormatMeta interface</a>.</p><h5 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h5><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> serializeError<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">JsonLogOptionalFields</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Doing some stuff and an error occurs!</span></span>
<span class="line"><span class="token keyword">const</span> errMsg <span class="token operator">=</span> <span class="token string">&#39;An error occurred! UH OH!&#39;</span><span class="token punctuation">;</span></span>
<span class="line">adze</span>
<span class="line">  <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">meta</span><span class="token generic class-name"><span class="token operator">&lt;</span>JsonLogOptionalFields<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    err<span class="token operator">:</span> <span class="token function">serializeError</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="example-output" tabindex="-1"><a class="header-anchor" href="#example-output"><span>Example Output</span></a></h5><p><img src="`+u+`" alt="example of a json log with a serialized error"></p><br><h4 id="serializerequest" tabindex="-1"><a class="header-anchor" href="#serializerequest"><span>serializeRequest</span></a></h4><hr><p>This function accepts a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer">JavaScript Request object</a> and returns a serialized meta data object that is compatible with the <a href="#jsonlogformatmeta-interface">JsonLogFormatMeta interface</a>.</p><h5 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1"><span>Example</span></a></h5><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> serializeRequest<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">JsonLogOptionalFields</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&#39;https://example.com/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  method<span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  headers<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;x-hi&#39;</span><span class="token operator">:</span> <span class="token string">&#39;Mom&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    connection<span class="token operator">:</span> <span class="token string">&#39;close&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    Authorization<span class="token operator">:</span> <span class="token string">&#39;Basic &#39;</span> <span class="token operator">+</span> <span class="token function">btoa</span><span class="token punctuation">(</span><span class="token string">&#39;username:password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// The Request serializer returns a promise so it must be awaited.</span></span>
<span class="line">adze</span>
<span class="line">  <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">meta</span><span class="token generic class-name"><span class="token operator">&lt;</span>JsonLogOptionalFields<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    req<span class="token operator">:</span> <span class="token keyword">await</span> <span class="token function">serializeRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Made a request!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="example-output-1" tabindex="-1"><a class="header-anchor" href="#example-output-1"><span>Example Output</span></a></h5><p><img src="`+d+`" alt="example of a json log with a serialized request"></p><br><h4 id="serializeresponse" tabindex="-1"><a class="header-anchor" href="#serializeresponse"><span>serializeResponse</span></a></h4><hr><p>This function accepts a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer">JavaScript Response object</a> and returns a serialized meta data object that is compatible with the <a href="#jsonlogformatmeta-interface">JsonLogFormatMeta interface</a>.</p><h5 id="example-2" tabindex="-1"><a class="header-anchor" href="#example-2"><span>Example</span></a></h5><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> serializeResponse<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">JsonLogOptionalFields</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// We&#39;ll make a fake response just for this example</span></span>
<span class="line"><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&#39;hello world!&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  status<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">  statusText<span class="token operator">:</span> <span class="token string">&#39;OK&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  headers<span class="token operator">:</span> <span class="token punctuation">{</span> boop<span class="token operator">:</span> <span class="token string">&#39;beep&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token string">&#39;url&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#39;https://example.com/login&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// The Response serializer returns a promise so it must be awaited.</span></span>
<span class="line">adze</span>
<span class="line">  <span class="token punctuation">.</span><span class="token generic-function"><span class="token function">meta</span><span class="token generic class-name"><span class="token operator">&lt;</span>JsonLogOptionalFields<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    res<span class="token operator">:</span> <span class="token keyword">await</span> <span class="token function">serializeResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Received a response!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="example-output-2" tabindex="-1"><a class="header-anchor" href="#example-output-2"><span>Example Output</span></a></h5><p><img src="`+m+'" alt="example of a json log with a serialized response"></p><br><h2 id="standard-formatter" tabindex="-1"><a class="header-anchor" href="#standard-formatter"><span>Standard Formatter</span></a></h2>',35),T=s("strong",null,"Standard",-1),j=s("a",{href:"https://en.wikipedia.org/wiki/Standard_streams",target:"_blank",rel:"noopener noreferrer"},"stdout",-1),L=s("code",null,"format",-1),S=s("code",null,'"standard"',-1),q=p(`<div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> setup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;standard&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">adze<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&#39;This is a standard warn log.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="example-output-3" tabindex="-1"><a class="header-anchor" href="#example-output-3"><span>Example Output</span></a></h4><p><img src="`+k+'" alt="example of server output for the standard format"></p><br><h2 id="common-formatter" tabindex="-1"><a class="header-anchor" href="#common-formatter"><span>Common Formatter</span></a></h2><p>The <strong>Common</strong> formatter is for generating human-readable logs according to the <a href="https://en.wikipedia.org/wiki/Common_Log_Format" target="_blank" rel="noopener noreferrer">Common Log Format</a>. This is primarily used for tracking network communications on servers.</p>',6),C=s("code",null,"format",-1),J=s("code",null,'"common"',-1),O=s("h3",{id:"commonlogformatmeta",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#commonlogformatmeta"},[s("span",null,"CommonLogFormatMeta")])],-1),A=s("code",null,"CommonLogFormatMeta",-1),R=p(`<h4 id="usage-example-1" tabindex="-1"><a class="header-anchor" href="#usage-example-1"><span>Usage Example</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> setup<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">CommonLogFormatMeta</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token generic-function"><span class="token function">setup</span><span class="token generic class-name"><span class="token operator">&lt;</span>CommonLogFormatMeta<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;common&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  meta<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    hostname<span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    ident<span class="token operator">:</span> <span class="token string">&#39;user-identifier&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    user<span class="token operator">:</span> <span class="token string">&#39;joe&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">adze<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;This is a standard warn log.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="interface-1" tabindex="-1"><a class="header-anchor" href="#interface-1"><span>Interface</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">CommonLogFormatMeta</span> <span class="token punctuation">{</span></span>
<span class="line">  hostname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  ident<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  user<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="example-output-4" tabindex="-1"><a class="header-anchor" href="#example-output-4"><span>Example Output</span></a></h4><p><img src="`+v+`" alt="example of server output for the common format"></p><br><h2 id="creating-third-party-formatters" tabindex="-1"><a class="header-anchor" href="#creating-third-party-formatters"><span>Creating Third-party Formatters</span></a></h2><p>If the formatters provided by Adze do not meet your requirements, you can create a custom formatter by extending the <a href="#formatter-class">Formatter class</a>.</p><h3 id="formatter-class" tabindex="-1"><a class="header-anchor" href="#formatter-class"><span>Formatter Class</span></a></h3><p>The <strong>Formatter class</strong> is the base for all built-in formatters and third-party formatters. It abstracts some of the basic logic away from the formatter in regards to the visibility, setting an apex timestamp formatter override method, and routing the log to the appropriate formatter method depending on the environment.</p><h4 id="interface-2" tabindex="-1"><a class="header-anchor" href="#interface-2"><span>Interface</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Properties</span></span>
<span class="line">  <span class="token keyword">protected</span> cfg<span class="token operator">:</span> Configuration<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">protected</span> level<span class="token operator">:</span> LevelConfiguration<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">protected</span> <span class="token function-variable function">timestampFormatFunction</span><span class="token operator">:</span> <span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// Constructor</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span>cfg<span class="token operator">:</span> Configuration<span class="token punctuation">,</span> level<span class="token operator">:</span> LevelConfiguration<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// Methods</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">timestampFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>date<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token function">formatBrowser</span><span class="token punctuation">(</span></span>
<span class="line">    data<span class="token operator">:</span> ModifierData<span class="token punctuation">,</span></span>
<span class="line">    timestamp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span></span>
<span class="line">    args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token function">formatServer</span><span class="token punctuation">(</span></span>
<span class="line">    data<span class="token operator">:</span> ModifierData<span class="token punctuation">,</span></span>
<span class="line">    timestamp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span></span>
<span class="line">    args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="properties" tabindex="-1"><a class="header-anchor" href="#properties"><span>Properties</span></a></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cfg</td><td>Configuration</td><td>The configuration of the log that is being formatted.</td></tr><tr><td>level</td><td>LevelConfiguration</td><td>The configuration for the log level that this log is being terminated as.</td></tr><tr><td>timestampFormatFunction</td><td>(date: Date) =&gt; string</td><td>An optional override function for the formatting the timestamp of the formatted log.</td></tr></tbody></table><h3 id="timestampformatter-getter" tabindex="-1"><a class="header-anchor" href="#timestampformatter-getter"><span>timestampFormatter getter</span></a></h3><p>This method returns the most relevant <code>timestampFormatter</code> function based on the hierarchy of the default function for formatting ISO-8601, then the timestampFormatter override from the <code>UserConfiguration</code>, then the timestamp formatter function defined by the Formatter class, with the Formatter class taking the highest priority.</p><h3 id="formatbrowser" tabindex="-1"><a class="header-anchor" href="#formatbrowser"><span>formatBrowser</span></a></h3><p>This method is called when in a browser environment for formatting the provided log arguments to be output in a browser developer console.</p>`,19),M=s("a",{href:"#timestampformatter-getter"},"timestampFormatter getter",-1),E=p(`<p>After applying formatting to the arguments, the <code>formatBrowser</code> method should return the formatted arguments as an array in the same order they were provided.</p><h4 id="example-3" tabindex="-1"><a class="header-anchor" href="#example-3"><span>Example</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Configuration<span class="token punctuation">,</span> Formatter<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">LevelConfiguration</span><span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">ModifierData</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">HelloFormatter</span> <span class="token keyword">extends</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span>cfg<span class="token operator">:</span> Configuration<span class="token punctuation">,</span> level<span class="token operator">:</span> LevelConfiguration<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// This constructor isn&#39;t necessary, but is here for illustrative purposes.</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">(</span>cfg<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">protected</span> <span class="token function">formatBrowser</span><span class="token punctuation">(</span>data<span class="token operator">:</span> ModifierData<span class="token punctuation">,</span> timestamp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// We&#39;ll make the first arg printed always the word &quot;Hello&quot;.</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">/*</span>
<span class="line">  ...a TypeScript error will be shown because we have not yet implemented </span>
<span class="line">  the formatServer() method. We will add it in the next section.</span>
<span class="line">  */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="formatserver" tabindex="-1"><a class="header-anchor" href="#formatserver"><span>formatServer</span></a></h3><p>This method is called when in a backend environment for formatting the provided log arguments to be output to the server terminal.</p>`,5),N=s("a",{href:"#timestampformatter-getter"},"timestampFormatter getter",-1),P=p(`<p>After applying formatting to the arguments, the <code>formatServer</code> method should return the formatted arguments as an array in the same order they were provided.</p><h4 id="example-4" tabindex="-1"><a class="header-anchor" href="#example-4"><span>Example</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Configuration<span class="token punctuation">,</span> Formatter<span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">LevelConfiguration</span><span class="token punctuation">,</span> <span class="token keyword">type</span> <span class="token class-name">ModifierData</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">HelloFormatter</span> <span class="token keyword">extends</span> <span class="token class-name">Formatter</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span>cfg<span class="token operator">:</span> Configuration<span class="token punctuation">,</span> level<span class="token operator">:</span> LevelConfiguration<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">(</span>cfg<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// ...formatBrowser method should be here from the previous section.</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">protected</span> <span class="token function">formatServer</span><span class="token punctuation">(</span>data<span class="token operator">:</span> ModifierData<span class="token punctuation">,</span> timestamp<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// We&#39;ll make the first arg printed always the word &quot;Hello&quot;.</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="using-a-third-party-formatter" tabindex="-1"><a class="header-anchor" href="#using-a-third-party-formatter"><span>Using a Third-party Formatter</span></a></h3>`,4),H=s("code",null,"formatters",-1),I=p(`<h4 id="example-5" tabindex="-1"><a class="header-anchor" href="#example-5"><span>Example</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> adze<span class="token punctuation">,</span> <span class="token punctuation">{</span> setup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;adze&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> HelloFormatter <span class="token keyword">from</span> <span class="token string">&#39;./hello-formatter.ts&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  formatters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    hello<span class="token operator">:</span> HelloFormatter<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// And to use the HelloFormatter, simply use the key as the value for the \`format\` property.</span></span>
<span class="line"><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  format<span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  formatters<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    hello<span class="token operator">:</span> HelloFormatter<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function B(D,U){const a=r("RouteLink");return c(),i("div",null,[f,s("p",null,[n("To use it, set the "),e(a,{to:"/reference/configuration.html#user-configuration"},{default:t(()=>[n("User Configuration")]),_:1}),n(),g,n(" value to be "),b,n(".")]),y,s("p",null,[n("To use it, set the "),e(a,{to:"/reference/configuration.html#user-configuration"},{default:t(()=>[n("User Configuration")]),_:1}),n(),w,n(" value to be "),x,n(".")]),_,s("p",null,[n("JSON formatted logs require some meta data to be compatible with the "),z,n(". To apply these values you must include them when calling the "),e(a,{to:"/reference/modifiers.html#meta"},{default:t(()=>[n("meta modifier")]),_:1}),n(" or apply them in the "),e(a,{to:"/reference/configuration.html#setup-function"},{default:t(()=>[n("setup function")]),_:1}),n(".")]),F,s("p",null,[n("The "),T,n(" formatter is for generating human-readable logs in a "),j,n(" environment. This is useful for writing human-readable logs to a file or for transporting them to other platforms. The Standard formatter does not require you to specify that you want "),e(a,{to:"/reference/modifiers.html#timestamp"},{default:t(()=>[n("timestamps")]),_:1}),n(" as it is a requirement for all logs of this type.")]),s("p",null,[n("To use it, set the "),e(a,{to:"/reference/configuration.html#user-configuration"},{default:t(()=>[n("User Configuration")]),_:1}),n(),L,n(" value to be "),S,n(".")]),q,s("p",null,[n("To use it, set the "),e(a,{to:"/reference/configuration.html#user-configuration"},{default:t(()=>[n("User Configuration")]),_:1}),n(),C,n(" value to be "),J,n(".")]),O,s("p",null,[n("The Common formatter requires some extra meta data to fill in various properties within a log formatted to the Common Log standard. Adze exports the "),A,n(" interface to assist you with filling in the necessary data. The Common formatter does not require you to specify that you want "),e(a,{to:"/reference/modifiers.html#timestamp"},{default:t(()=>[n("timestamps")]),_:1}),n(" as it is a requirement for all logs of this type.")]),R,s("p",null,[n("This method is provided the "),e(a,{to:"/reference/modifiers.html"},{default:t(()=>[n("modifier data")]),_:1}),n(" for all modifiers applied to the log, the timestamp according to the "),M,n(", and the raw arguments for the log provided by the user.")]),E,s("p",null,[n("This method is provided the "),e(a,{to:"/reference/modifiers.html"},{default:t(()=>[n("modifier data")]),_:1}),n(" for all modifiers applied to the log, the timestamp according to the "),N,n(", and the raw arguments for the log provided by the user.")]),P,s("p",null,[n("To include a third-party formatter for use with Adze you must add it to the "),H,n(" object property of the "),e(a,{to:"/reference/configuration.html#user-configuration"},{default:t(()=>[n("User Configuration")]),_:1}),n(" as a key/value pair.")]),I])}const Y=l(h,[["render",B],["__file","formatters.html.vue"]]),G=JSON.parse('{"path":"/reference/formatters.html","title":"Formatters","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Pretty Formatter","slug":"pretty-formatter","link":"#pretty-formatter","children":[]},{"level":2,"title":"JSON Formatter","slug":"json-formatter","link":"#json-formatter","children":[{"level":3,"title":"JsonLogFormatMeta Interface","slug":"jsonlogformatmeta-interface","link":"#jsonlogformatmeta-interface","children":[]},{"level":3,"title":"JsonLogFormatMeta Serializer Functions","slug":"jsonlogformatmeta-serializer-functions","link":"#jsonlogformatmeta-serializer-functions","children":[]}]},{"level":2,"title":"Standard Formatter","slug":"standard-formatter","link":"#standard-formatter","children":[]},{"level":2,"title":"Common Formatter","slug":"common-formatter","link":"#common-formatter","children":[{"level":3,"title":"CommonLogFormatMeta","slug":"commonlogformatmeta","link":"#commonlogformatmeta","children":[]}]},{"level":2,"title":"Creating Third-party Formatters","slug":"creating-third-party-formatters","link":"#creating-third-party-formatters","children":[{"level":3,"title":"Formatter Class","slug":"formatter-class","link":"#formatter-class","children":[]},{"level":3,"title":"timestampFormatter getter","slug":"timestampformatter-getter","link":"#timestampformatter-getter","children":[]},{"level":3,"title":"formatBrowser","slug":"formatbrowser","link":"#formatbrowser","children":[]},{"level":3,"title":"formatServer","slug":"formatserver","link":"#formatserver","children":[]},{"level":3,"title":"Using a Third-party Formatter","slug":"using-a-third-party-formatter","link":"#using-a-third-party-formatter","children":[]}]}],"git":{"updatedTime":1739811018000,"contributors":[{"name":"Andrew Stacy","email":"ajstacy@gmail.com","commits":1},{"name":"Andrew Stacy","email":"astacy@stratacache.com","commits":1}]},"filePathRelative":"reference/formatters.md","excerpt":"\\n<p>The primary purpose of Adze is to give the user simple ways of shaping their logs to fit their\\nneeds. Adze comes with <strong>four</strong> formatters out of the box.</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Formatter</th>\\n<th>Value</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td><a href=\\"#pretty-formatter\\">Pretty</a></td>\\n<td><code>\\"pretty\\"</code></td>\\n<td>The default formatter. This prints logs in a pretty, human-readable format.</td>\\n</tr>\\n<tr>\\n<td><a href=\\"#json-formatter\\">JSON</a></td>\\n<td><code>\\"json\\"</code></td>\\n<td>This formatter prints logs as machine-readable JSON objects that are compatible with the <a href=\\"https://github.com/trentm/node-bunyan?tab=readme-ov-file#cli-usage\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Bunyan CLI</a>.</td>\\n</tr>\\n<tr>\\n<td><a href=\\"#standard-formatter\\">Standard</a></td>\\n<td><code>\\"standard\\"</code></td>\\n<td>This formatter prints human-readable logs for a simple <strong>stdout</strong> format for terminals or files.</td>\\n</tr>\\n<tr>\\n<td><a href=\\"#common-formatter\\">Common</a></td>\\n<td><code>\\"common\\"</code></td>\\n<td>This formatter prints logs according to the <a href=\\"https://en.wikipedia.org/wiki/Common_Log_Format\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Common Log Format</a>.</td>\\n</tr>\\n</tbody>\\n</table>"}');export{Y as comp,G as data};
